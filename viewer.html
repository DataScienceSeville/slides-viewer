<!DOCTYPE html>
<html>
  <head>
    <title>Title</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <style type="text/css">
      @import url(//fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(//fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(//fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      img { max-width:350px; max-height:350px; }
      h1 { margin-top:0px; }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; font-size:9pt; }
      .onlyimage img { min-width:100%;  }

      img {  border:2px solid #fff; box-shadow: 0px 0px 40px #ccc; -moz-box-shadow: 0px 0px 40px #ccc; -webkit-box-shadow: 0px 0px 40px #ccc; -khtml-box-shadow: 0px 0px 40px #ccc; } 
      /* Two-column layout */
      .left-column {
        width: 50%;
        float: left;
       }

      .right-column {
        width: 50%;
        float: right;
        padding-top: 1em;
      }

      .font-size-25 { font-size: 25px; } .font-size-30 { font-size: 30px; } .font-size-40 { font-size: 40px; } 
      .smaller { font-size: small; }
      .footnote {
        position: absolute;
        bottom: 3em;
      }
      .mini-images img { max-width:100px; }
      .exercise { font-size:small; background-color: #AEB404; border-radius: 5px; padding: 5px 20px}

    </style>
  </head>
  <body>
    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="http://gnab.github.io/remark/downloads/remark-latest.min.js">
    </script>
    <script>
		
	function GetURLParameter(sParam)
	{
		var sPageURL = window.location.search.substring(1);
		var sURLVariables = sPageURL.split('&');
		for (var i = 0; i < sURLVariables.length; i++) 
		{
			var sParameterName = sURLVariables[i].split('=');
			if (sParameterName[0] == sParam) 
			{
				return decodeURIComponent(sParameterName[1]);
			}
		}
	}

	function base_url(url, segment){
		// get the segments
		pathArray = url.split( '/' );
		// find where the segment is located
		indexOfSegment = pathArray.indexOf(segment);
		// make base_url be the origin plus the path to the segment
		return pathArray.slice(0,indexOfSegment).join('/') + '/';
	}

	function isAbsolute(url) {

		var pat = /^https?:\/\//i;
		if (pat.test(url))
		{
		    return true;
		}
		
		return false;

	}

	function ResolveUrl(baseUrl, url) {
	    if ( isAbsolute(url) ) return url;
	    
	    if ( url.indexOf("~") == 0 ) url = url.substring(1); 	
	    if ( url.indexOf(".") == 0 ) url = url.substring(1); 
	    if ( url.indexOf("/") != 0 ) url = "/" + url;
	   
	    return baseUrl + url;
	}
	
	var md = GetURLParameter("md");
	var slideshow = remark.create({ sourceUrl: md });
	
	var base_url = base_url(md);
	var imgs = $('img')
	for(var i=0; i < imgs.length; i++) {
		var img = imgs[i];
		$(img).attr('src', ResolveUrl(base_url, $(img).attr('src')) );
	}
	
	

    </script>
  </body>
</html>
